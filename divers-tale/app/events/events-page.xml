<Page
  class="page"
  navigatingTo="onNavigatingTo"  
  xmlns:nsDrawer="nativescript-pro-ui/sidedrawer"
  xmlns:myDrawer="shared/my-drawer"
  xmlns="http://www.nativescript.org/tns.xsd"
  xmlns:FAB="nativescript-floatingactionbutton"
  xmlns:PullRefresh="nativescript-pulltorefresh">
  <ActionBar class="action-bar">
    <NavigationButton ios:visibility="collapsed" icon="res://menu" tap="onDrawerButtonTap"/>
    <ActionItem icon="res://navigation/menu" android:visibility="collapsed" tap="onDrawerButtonTap" ios.position="left"/>
    <Label class="action-bar-title" text="Events"/>
  </ActionBar>
  <nsDrawer:RadSideDrawer id="sideDrawer" showOverNavigation="true">

    <nsDrawer:RadSideDrawer.drawerTransition>
      <nsDrawer:SlideInOnTopTransition/>
    </nsDrawer:RadSideDrawer.drawerTransition>
    
    <nsDrawer:RadSideDrawer.drawerContent>
      <StackLayout>
        <myDrawer:MyDrawer selectedPage="Events"/>
      </StackLayout>
    </nsDrawer:RadSideDrawer.drawerContent>

    <nsDrawer:RadSideDrawer.mainContent>
      <PullRefresh:PullToRefresh refresh="refreshList">
        <GridLayout rows="auto, *">
            <ListView row="1" items="{{ eventsModel }}">
              <ListView.itemTemplate>
                <GridLayout rows="auto, auto" columns="auto, auto, auto" tap="viewDetails">
                  <Image width="100" heiht="100" stretch="aspectFill" src="{{ image }}" style="margin-top: 15px; margin-bottom: 15px;" rowSpan="2"/>
                  <Label text="{{ name }}" style="font-weight: bold; margin: 10px" col="1" textWrap="true" />
                  <Label visibility="{{ canceled ? 'visible' : 'collapse' }}" text="Abgesagt!" style="color: #c42323; margin: 10px" row="1" col="1" textWrap="true"/>
                  <Label visibility="{{ canceled ? 'collapsed' : 'visible' }}" text="{{ date + ' um ' + time + ' Uhr'}}" style="margin: 10px" row="1" col="1" textWrap="true"/>
                </GridLayout>
              </ListView.itemTemplate>
            </ListView>
          <FAB:fab row="1" tap="newEvent" rippleColor="#f1f1f1" class="fab-button" icon="res://ic_add_white"/>
        </GridLayout>
      </PullRefresh:PullToRefresh> 
    </nsDrawer:RadSideDrawer.mainContent>
  </nsDrawer:RadSideDrawer>
</Page>